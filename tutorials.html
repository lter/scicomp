<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Other Tutorials – LTER Scientific Computing Team</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./images/logos/hex_scicomptools.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<meta name="twitter:title" content="Other Tutorials – LTER Scientific Computing Team">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">LTER Scientific Computing Team</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-working-group-onboarding" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Working Group Onboarding</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-working-group-onboarding">    
        <li>
    <a class="dropdown-item" href="./wg_team-coding.html">
 <span class="dropdown-text">Team Coding</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./wg_services.html">
 <span class="dropdown-text">Support Services</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./wg_tools.html">
 <span class="dropdown-text">Suggested Tools</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./wg_facilitation.html">
 <span class="dropdown-text">Facilitation</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-trainings" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Trainings</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-trainings">    
        <li>
    <a class="dropdown-item" href="./workshops.html">
 <span class="dropdown-text">Workshops</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tutorial_server.html">
 <span class="dropdown-text">Server Tutorial</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tutorials.html">
 <span class="dropdown-text">Other Tutorials</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./best_practices.html"> 
<span class="menu-text">Coding Tips</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./portfolio.html"> 
<span class="menu-text">Portfolio</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-our-team" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Our Team</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-our-team">    
        <li>
    <a class="dropdown-item" href="./staff.html">
 <span class="dropdown-text">People</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./data-acquisition.html">
 <span class="dropdown-text">Data Acquisition</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./team-onboarding.html">
 <span class="dropdown-text">Internal - Team Onboarding</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./wg-setup.html">
 <span class="dropdown-text">Internal - Group Setup</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./shiny-server.html">
 <span class="dropdown-text">Internal - Deploy Shiny Apps</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lter/scicomp"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#storing-user-specific-information" id="toc-storing-user-specific-information" class="nav-link active" data-scroll-target="#storing-user-specific-information">Storing User-Specific Information</a>
  <ul class="collapse">
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites">Prerequisites</a></li>
  <li><a href="#create-the-json" id="toc-create-the-json" class="nav-link" data-scroll-target="#create-the-json">1. Create the JSON</a></li>
  <li><a href="#save-the-json-with-a-consistent-name" id="toc-save-the-json-with-a-consistent-name" class="nav-link" data-scroll-target="#save-the-json-with-a-consistent-name">2. Save the JSON with a Consistent Name</a></li>
  <li><a href="#tell-git-to-ignore-the-json" id="toc-tell-git-to-ignore-the-json" class="nav-link" data-scroll-target="#tell-git-to-ignore-the-json">3. Tell Git to Ignore the JSON</a></li>
  <li><a href="#benefit-from-the-json" id="toc-benefit-from-the-json" class="nav-link" data-scroll-target="#benefit-from-the-json">4. Benefit from the JSON!</a></li>
  </ul></li>
  <li><a href="#using-the-googledrive-r-package" id="toc-using-the-googledrive-r-package" class="nav-link" data-scroll-target="#using-the-googledrive-r-package">Using the <code>googledrive</code> R Package</a>
  <ul class="collapse">
  <li><a href="#prerequisites-1" id="toc-prerequisites-1" class="nav-link" data-scroll-target="#prerequisites-1">Prerequisites</a></li>
  <li><a href="#authorize-googledrive" id="toc-authorize-googledrive" class="nav-link" data-scroll-target="#authorize-googledrive">Authorize <code>googledrive</code></a></li>
  <li><a href="#problems-with-authorization" id="toc-problems-with-authorization" class="nav-link" data-scroll-target="#problems-with-authorization">Problems with Authorization</a></li>
  <li><a href="#find-and-download-files" id="toc-find-and-download-files" class="nav-link" data-scroll-target="#find-and-download-files">Find and Download Files</a></li>
  </ul></li>
  <li><a href="#building-a-website-with-quarto" id="toc-building-a-website-with-quarto" class="nav-link" data-scroll-target="#building-a-website-with-quarto">Building a Website with Quarto</a>
  <ul class="collapse">
  <li><a href="#prerequisites-2" id="toc-prerequisites-2" class="nav-link" data-scroll-target="#prerequisites-2">Prerequisites</a></li>
  <li><a href="#create-a-quarto-website-r-project" id="toc-create-a-quarto-website-r-project" class="nav-link" data-scroll-target="#create-a-quarto-website-r-project">Create a Quarto Website R Project</a></li>
  <li><a href="#preparing-project-for-web-deployment" id="toc-preparing-project-for-web-deployment" class="nav-link" data-scroll-target="#preparing-project-for-web-deployment">Preparing Project for Web Deployment</a></li>
  <li><a href="#make-a-new-github-repository" id="toc-make-a-new-github-repository" class="nav-link" data-scroll-target="#make-a-new-github-repository">Make a New GitHub Repository</a></li>
  <li><a href="#adding-your-project-to-github" id="toc-adding-your-project-to-github" class="nav-link" data-scroll-target="#adding-your-project-to-github">Adding your Project to GitHub</a></li>
  <li><a href="#deploy-website-via-github" id="toc-deploy-website-via-github" class="nav-link" data-scroll-target="#deploy-website-via-github">Deploy Website via GitHub</a></li>
  <li><a href="#adding-website-content" id="toc-adding-website-content" class="nav-link" data-scroll-target="#adding-website-content">Adding Website Content</a></li>
  <li><a href="#supplementary-information" id="toc-supplementary-information" class="nav-link" data-scroll-target="#supplementary-information">Supplementary Information</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/lter/scicomp/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    <div class="quarto-margin-footer"><div class="margin-footer-item">
<p><img src="images/logos/lter.png" alt="LTER Network logo" width="40%"> <img src="images/logos/nceas.png" alt="NCEAS logo" width="40%"></p>
</div></div></div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Other Tutorials</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Some of the content that we produce is not as detailed as our full workshops but has a wider scope than the content included in our <a href="https://nceas.github.io/scicomp.github.io/best_practices.html">Coding Tips</a> suggestions. This information can broadly be defined as “tutorials” though their depth and scope can vary significantly depending on the topic being tutorialized. As with our <a href="https://nceas.github.io/scicomp.github.io/best_practices.html">Coding Tips</a>, this page is under constant development so please <a href="https://github.com/NCEAS/scicomp.github.io/issues">post an issue</a> if you have an idea for a tutorial that you’d like to suggest that we create.</p>
<section id="storing-user-specific-information" class="level2">
<h2 class="anchored" data-anchor-id="storing-user-specific-information">Storing User-Specific Information</h2>
<p>Working groups sometimes need to handle user-specific information in their code. For example, if your group stores your data in the cloud (e.g., in Box, in Dropbox, etc.) each user will have a different “absolute file path” to the synced version of the data folder on their personal computer. Similarly, groups may find it valuable to use their email address in the code. While you <em>could</em> simply have each group member add their information (file path, email, etc.) and comment out all but one of them when you work in that script, there is a better option: user-specific JSON files!</p>
<p>The main advantage of this method is that you and your group members <u>do not have to manually change <em>any user-specific information</em> in scripts</u> just because a different person runs them!</p>
<section id="prerequisites" class="level3">
<h3 class="anchored" data-anchor-id="prerequisites">Prerequisites</h3>
<p>To follow along with this tutorial you will need to take the following steps:</p>
<ul>
<li>Download <a href="https://cran.r-project.org/">R</a></li>
<li>Download <a href="https://posit.co/downloads/">RStudio</a></li>
<li>Install the <code>jsonlite</code> R package</li>
</ul>
<p>Feel free to skip any steps that you have already completed!</p>
</section>
<section id="create-the-json" class="level3">
<h3 class="anchored" data-anchor-id="create-the-json">1. Create the JSON</h3>
<p>First, you’ll need to use RStudio to create your JSON file by creating a new text file (in the top left of RStudio click “File” <i class="fa-solid fa-arrow-right" aria-label="arrow-right"></i> “New File” <i class="fa-solid fa-arrow-right" aria-label="arrow-right"></i> “Text File”). In the new text file, add content that looks like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"email"</span><span class="sc">:</span><span class="st">"my_email@gmail.com"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dropbox_path"</span><span class="sc">:</span><span class="st">"path/to/dropbox-sync/for/me"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Replace the content on the <em>right</em> of the colon with your actual information. If desired, you can add as many other pieces of user-specific information as you’d like! Simply follow the <code>"info name":"info content"</code> format and make sure that each piece of information is on its own line.</p>
<p>One small note here for when you work with your group: <u>all group members need to use <em>exactly the same name</em> to the left of each colon</u>.</p>
<p>You’ll see later when we show an example of this but you can think of the information on the left of the colon as comparable with a column name. It doesn’t matter that the text in the “rows” will differ between users as long as the script has a consistent “column” in which to look for that text.</p>
</section>
<section id="save-the-json-with-a-consistent-name" class="level3">
<h3 class="anchored" data-anchor-id="save-the-json-with-a-consistent-name">2. Save the JSON with a Consistent Name</h3>
<p>This may seem self-evident but <u>all group members need to use the same file name for this new JSON file</u>. We recommend <code>user.json</code> if you are undecided. This will let scripts that refer to the JSON use the same file name regardless of which user is running the code (same spirit as using consistent names for each piece of information in the file.)</p>
</section>
<section id="tell-git-to-ignore-the-json" class="level3">
<h3 class="anchored" data-anchor-id="tell-git-to-ignore-the-json">3. Tell Git to Ignore the JSON</h3>
<p>If you’re using version control for your project (which we strongly recommend!), you’ll want Git to ignore the fact that this file differs for each user. Navigate to the <code>.gitignore</code> file of your project and put in the name of your JSON file as one of the files to ignore. We don’t want to push the JSON to GitHub since each person’s file will look different (that is our intent after all) and you wouldn’t want to accidentally overwrite your teammate’s user-specific information or cause a merge conflict.</p>
<p>For a deeper dive into the <code>.gitignore</code> check out <a href="https://nceas.github.io/scicomp-workshop-collaborative-coding/git_ignore.html">that module</a> of our “Collaborative Coding with GitHub” workshop!</p>
</section>
<section id="benefit-from-the-json" class="level3">
<h3 class="anchored" data-anchor-id="benefit-from-the-json">4. Benefit from the JSON!</h3>
<p>If you’ve made it through the preceding steps, you can now use the information you stored in the JSON file. You’ll need to use the <code>jsonlite</code> R package to read in your file but once you’ve done that, you can access the information inside of it in classic R fashion.</p>
<p>See an example below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load needed library</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in the JSON file</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>user_info <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(<span class="st">"user.json"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Grab the file path out of it</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>dropbox <span class="ot">&lt;-</span> user_info<span class="sc">$</span>dropbox_path</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Use it as you would any other file path</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>my_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="fu">file.path</span>(dropbox, <span class="st">"2024_data.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now everyone in your group can use the same script because their personal file paths are readily accessible without needing to be hard-coded! The same theory applies to any other piece of information your group finds it valuable to store in the JSON.</p>
<section id="help-with-absolute-file-paths" class="level4">
<h4 class="anchored" data-anchor-id="help-with-absolute-file-paths">Help with Absolute File Paths</h4>
<p>Identifying and manually writing out an absolute file path can be cumbersome so we’ve found a nice work-around (at least for Mac users) that you may find useful. First, in Finder, navigate to the last folder in the file path you’d like to preserve. In the row of folder names in the bottom of the Finder window, right-click the folder name and select “Copy ‘&lt;folder name&gt;’ as Pathname”.</p>
<p>Once you’ve done that, you can simply paste the file path into your JSON file.</p>
<p align="center">
<img src="images/tutorial_jsonlite/jsonlite-1.png" width="75%">
</p>
</section>
</section>
</section>
<section id="using-the-googledrive-r-package" class="level2">
<h2 class="anchored" data-anchor-id="using-the-googledrive-r-package">Using the <code>googledrive</code> R Package</h2>
<p>The <a href="https://googledrive.tidyverse.org/"><code>googledrive</code> R package</a> is a package that lets R users directly interact with files on GoogleDrive. This can be extremely useful because it lets all members of a team share the same source data file(s) and guarantees that updates to “living” documents are received by all group members the next time they run their R script. This package is technically part of the Tidyverse but is not loaded by running <code>library(tidyverse)</code>.</p>
<p>Because this package requires access to an R user’s GoogleDrive, you must “authenticate” the <code>googledrive</code> package. This essentially tells Google that it is okay if an R package uses your credentials to access and (potentially) modify your Drive content. There are only a few steps to this process but follow along with the below tutorial and we’ll get you ready to integrate the Google Drive into your code workflows using the <code>googledrive</code> package in no time!</p>
<section id="prerequisites-1" class="level3">
<h3 class="anchored" data-anchor-id="prerequisites-1">Prerequisites</h3>
<p>To follow along with this tutorial you will need to take the following steps:</p>
<ul>
<li>Download <a href="https://cran.r-project.org/">R</a></li>
<li>Download <a href="https://posit.co/downloads/">RStudio</a></li>
<li>Create a Gmail account</li>
</ul>
<p>Feel free to skip any steps that you have already completed!</p>
</section>
<section id="authorize-googledrive" class="level3">
<h3 class="anchored" data-anchor-id="authorize-googledrive">Authorize <code>googledrive</code></h3>
<p>In order to connect R with a GoogleDrive, we’ll need to authorize <code>googledrive</code> to act on our behalf. This only needs to be done once (per computer) so follow along and you’ll be building GoogleDrive into your workflows in no time!</p>
<p>First, <strong>install the <code>googledrive</code> and <code>httpuv</code> R packages</strong>. The <code>googledrive</code> package’s need is self-evident while the <code>httpuv</code> package makes the following steps a little easier than <code>googledrive</code> makes it alone. Be sure to load the <code>googledrive</code> package after you install it!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install packages</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"googledrive"</span>, <span class="st">"httpuv"</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load them</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googledrive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once you’ve installed the packages we can begin the authentication in R using the <code>drive_auth</code> function in the <code>googledrive</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>googledrive<span class="sc">::</span><span class="fu">drive_auth</span>(<span class="at">email =</span> <span class="st">"enter your gmail here!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If this is your <em>first time</em> using <code>googledrive</code>, <code>drive_auth</code> will kick you to a new tab of your browser (see below for a screen grab of that screen) where you can pick which Gmail you’d like to connect to R.</p>
<p align="center">
<img src="images/tutorial_drive-auth/drive-auth-1.png" width="50%">
</p>
<p><strong>Click the Gmail you want to use</strong> and you will get a second screen where Google tells you that “Tidyverse API” wants access to your Google Account. This message is followed by three checkboxes, the first two are grayed out but the third is unchecked.</p>
<p align="center">
<img src="images/tutorial_drive-auth/drive-auth-2.png" width="50%">
</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
NOTE
</div>
</div>
<div class="callout-body-container callout-body">
<p>This next bit is vitally important so <em>carefully</em> read and follow the next instruction!</p>
</div>
</div>
<p>In this screen, <strong>you must check the unchecked box</strong> to be able to use the <code>googledrive</code> R package. If you do not check this box all attempts to use <code>googledrive</code> functions will get an error that says “insufficient permissions”.</p>
<p align="center">
<img src="images/tutorial_drive-auth/drive-auth-3.png" width="50%">
</p>
<p>While granting access to “see, edit, create, and”delete” all of your Google Drive files” sounds like a significant security risk, those powers are actually why you’re using the <code>googledrive</code> package in the first place! You want to be able to download existing Drive files, change them in R on your computer, and then put them back in Google Drive which is exactly what is meant by “see, edit, create, and delete”.</p>
<p>Also, this power <em>only applies to the computer you’re currently working on!</em> Granting access on your work computer allows <strong>only</strong> that computer to access your Drive files. So don’t worry about giving access to your Drive to the whole world, that is protected by the same failsafes that you use when you let your computer remember a password to a website you frequent.</p>
<p><em>After</em> you’ve checked the authorization box, <strong>scroll down and click the “Continue” button</strong>.</p>
<p align="center">
<img src="images/tutorial_drive-auth/drive-auth-4.png" width="50%">
</p>
<p>This should result in a plain text page that tells you to close this window and return to R. If you see this message you are ready to use the <code>googledrive</code> package!</p>
<p align="center">
<img src="images/tutorial_drive-auth/drive-auth-5.png" width="75%">
</p>
</section>
<section id="problems-with-authorization" class="level3">
<h3 class="anchored" data-anchor-id="problems-with-authorization">Problems with Authorization</h3>
<p>If you have tried to use <code>drive_auth</code> and <em>did not</em> check the box indicated above, you need to make the <code>googledrive</code> package ask you again. Using <code>drive_auth</code> will not (annoyingly) return you to the place it sent you the first time. However, if you run the following code chunk it should give you another chance to check the needed box.</p>
<p>The <a href="https://gargle.r-lib.org/"><code>gargle</code> R package</a> referenced below is required for interacting with Google Application Program Interfaces (APIs). This package does the heavy lifting of secure password and token management and is necessary for the <code>googledrive</code> authentication chunk below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>googledrive<span class="sc">::</span><span class="fu">drive_auth</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">email =</span> gargle<span class="sc">::</span><span class="fu">gargle_oauth_email</span>(),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="cn">NULL</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">scopes =</span> <span class="st">"https://www.googleapis.com/auth/drive"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">cache =</span> gargle<span class="sc">::</span><span class="fu">gargle_oauth_cache</span>(),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">use_oob =</span> gargle<span class="sc">::</span><span class="fu">gargle_oob_default</span>(),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">token =</span> <span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Unfortunately, to use the <code>googledrive</code> package you <em>must</em> check the box that empowers the package to function as designed. If you’re uncomfortable giving the <code>googledrive</code> that much power you will need to pivot your workflow away from using GoogleDrive directly. However, NCEAS does offer access to an <a href="https://nceas.github.io/scicomp-workshop-collaborative-coding/server.html">internal server called “Aurora”</a> where data can be securely saved and shared among group members without special authentication like what <code>googledrive</code> requires. Reach out to our team if this seems like a more attractive option for your working group and we can offer training on how to use this powerful tool!</p>
</section>
<section id="find-and-download-files" class="level3">
<h3 class="anchored" data-anchor-id="find-and-download-files">Find and Download Files</h3>
<p>Now that you’ve authorized the <code>googledrive</code> package, you can start downloading the Google Drive files you need through R! Let’s say that you want to download a csv file from a folder or shared drive. You can save the URL of that folder/shared drive to a variable.</p>
<p>The <code>googledrive</code> package makes it straightforward to access Drive folders and files with the <code>as_id</code> function. This function allows the full link to a file or folder to serve as a direct connection to that file/folder. Most of the other <code>googledrive</code> functions will require a URL that is wrapped with <code>as_id</code> in this way. You would replace “your url here” with the actual link but make sure it is in quotation marks.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>drive_url <span class="ot">&lt;-</span> googledrive<span class="sc">::</span><span class="fu">as_id</span>(<span class="st">"your url here"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To list all the contents of this folder, we can use the <code>drive_ls</code> function. You will get a dataframe-like object of the files back as the output. An example is shown below in the screenshot. Here, this Google Drive folder contains 4 csv files: <code>ingredients.csv</code>, <code>favorite_soups.csv</code>, <code>favorite_fruits.csv</code> and <code>favorite_desserts.csv</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>drive_folder <span class="ot">&lt;-</span> googledrive<span class="sc">::</span><span class="fu">drive_ls</span>(<span class="at">path =</span> drive_url)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>drive_folder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p align="center">
<img src="images/tutorial_drive-auth/drive-download-0.png" width="90%">
</p>
<p>If it has been a while since you’ve used <code>googledrive</code>, it will prompt you to refresh your token. Simply enter the number that corresponds to the correct Google Drive account.</p>
<p align="center">
<img src="images/tutorial_drive-auth/drive-download-1.png" width="90%">
</p>
<p>If you only want to list files of a certain type, you can specify this in the <code>type</code> argument. And let’s say that my folder contains a bunch of csv files, but I only want to download the one named “favorite_desserts.csv”. In that case, I can also put a matching string in the <code>pattern</code> argument in order to filter down to 1 file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>drive_folder <span class="ot">&lt;-</span> googledrive<span class="sc">::</span><span class="fu">drive_ls</span>(<span class="at">path =</span> drive_url,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">type =</span> <span class="st">"csv"</span>, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">pattern =</span> <span class="st">"favorite_desserts"</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>drive_folder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p align="center">
<img src="images/tutorial_drive-auth/drive-download-2.png" width="90%">
</p>
<p>Once we’ve narrowed down to the file we want, we can download it using <code>drive_download</code>. This function takes the file identifier as an argument so we can access it using <code>drive_folder$id</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>googledrive<span class="sc">::</span><span class="fu">drive_download</span>(<span class="at">file =</span> drive_folder<span class="sc">$</span>id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will automatically download the file to our working directory. If you want, you can specify a different path to download to. Just put the new file path into the <code>path</code> argument, replacing the “your path here”, but keep the quotation marks.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>googledrive<span class="sc">::</span><span class="fu">drive_download</span>(<span class="at">file =</span> drive_folder<span class="sc">$</span>id, </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">path =</span> <span class="st">"your path here"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you’ve downloaded the file before, and you want to overwrite it, there’s a handy <code>overwrite</code> argument that you can set to <code>TRUE</code>. Note that the default is <code>FALSE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>googledrive<span class="sc">::</span><span class="fu">drive_download</span>(<span class="at">file =</span> drive_folder<span class="sc">$</span>id, </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">path =</span> <span class="st">"your path here"</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">overwrite =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If there are multiple files in the Drive folder and you want to download them all, you can use a loop like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For each file:</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(focal_file <span class="cf">in</span> drive_folder<span class="sc">$</span>name){</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Find the file identifier for that file</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  file_id <span class="ot">&lt;-</span> <span class="fu">subset</span>(drive_folder, name <span class="sc">==</span> focal_file)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Download that file</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drive_download</span>(<span class="at">file =</span> file_id<span class="sc">$</span>id, </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">path =</span> <span class="st">"your path here"</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">overwrite =</span> T)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="building-a-website-with-quarto" class="level2">
<h2 class="anchored" data-anchor-id="building-a-website-with-quarto">Building a Website with Quarto</h2>
<p><a href="https://quarto.org/">Quarto</a> is a new tool developed by RStudio (the company, not the program) to create a more ‘what you see is what you get’ editor for creating markdown files and products (e.g., books, websites, etc.). Additionally, it includes a visual editor that allows users to insert headings and embed figures via buttons that are intuitively labeled rather than through somewhat arcane HTML text or symbols. While Quarto is still in its infancy, it is rapidly gathering a following due to the aforementioned visual editor and for the ease with which quarto documents and websites can be created.</p>
<section id="prerequisites-2" class="level3">
<h3 class="anchored" data-anchor-id="prerequisites-2">Prerequisites</h3>
<p>To follow along with this tutorial you will need to take the following steps:</p>
<ul>
<li>Do all of the <a href="https://nceas.github.io/scicomp-workshop-collaborative-coding/#workshop-preparation">pre-workshop steps</a> relevant to our “Collaborative Coding with GitHub” workshop</li>
<li><a href="https://quarto.org/docs/get-started/">Download Quarto</a></li>
</ul>
<p>Feel free to skip any steps that you have already completed!</p>
</section>
<section id="create-a-quarto-website-r-project" class="level3">
<h3 class="anchored" data-anchor-id="create-a-quarto-website-r-project">Create a Quarto Website R Project</h3>
<p>To begin, <strong>click the “Project” button</strong> in the top right of your RStudio session.</p>
<p><img src="images/tutorial_quarto-website/website-tutorial_new-proj-1.png" width="100%"></p>
<p>In the resulting dialogue, <strong>click the “New Directory” option.</strong></p>
<p align="center">
<img src="images/tutorial_quarto-website/website-tutorial_new-proj-2.png" width="60%">
</p>
<p>From the list of options for project templates, <strong>select “Quarto Website”.</strong></p>
<p align="center">
<img src="images/tutorial_quarto-website/website-tutorial_new-proj-3.png" width="60%">
</p>
<p><strong>Pick a title</strong> and <strong>check the “Create a git repository” checkbox.</strong> For your title, short but descriptive titles are most effective. Once that is done, click <strong>“Create Project”</strong> in the bottom right of the window.</p>
<p align="center">
<img src="images/tutorial_quarto-website/website-tutorial_new-proj-4.png" width="60%">
</p>
<p>After a few seconds, RStudio should refresh with a Quarto document (such documents have the file extension “.qmd”) and a “_quarto.yml” file open.</p>
<p align="center">
<img src="images/tutorial_quarto-website/website-tutorial_new-proj-5.png" width="75%">
</p>
<p>Part of Quarto’s central philosophy is that all of the formatting of individual .qmd files in a project is governed by the settings created by a singular .yml file. In an R markdown project some of the global settings are set in .yml but other settings are handled within each .Rmd file. This centralization is a key innovation in streamlining projects and is one reason for Quarto’s quick popularity.</p>
</section>
<section id="preparing-project-for-web-deployment" class="level3">
<h3 class="anchored" data-anchor-id="preparing-project-for-web-deployment">Preparing Project for Web Deployment</h3>
<p>To prepare your project for web deployment via GitHub Pages, we have <strong>three</strong> quick steps that we must first complete.</p>
<p><em>First</em>, in the “_quarto.yml” file, <strong>add <code>output-dir: docs</code> as a subheading beneath the <code>project:</code> heading.</strong> Make sure that the indentation is the same as the <code>type: website</code> but the new line can be either above or below that line.</p>
<p align="center">
<img src="images/tutorial_quarto-website/website-tutorial_deploy-prep-1.png" width="75%">
</p>
<p><em>Second</em>, <strong>in the “Terminal” pane run <code>touch .nojekyll</code>.</strong> This creates a file called “.nojekyll” that is necessary for hosting your website via GitHub Pages.</p>
<p><em>Third</em>, <strong>in the “Terminal” pane run <code>quarto render</code>.</strong> This processes the template .qmd files you currently have in the repository and prepares them to become actual web pages.</p>
<p>Once you’ve done these three things you can move on to creating a GitHub repository so that we can take the necessary steps to having GitHub host your website!</p>
</section>
<section id="make-a-new-github-repository" class="level3">
<h3 class="anchored" data-anchor-id="make-a-new-github-repository">Make a New GitHub Repository</h3>
<p>From your GitHub <strong>“Repositories”</strong> tab, click the <strong><span style="color:green"> green </span> “New”</strong> button.</p>
<p><img src="images/tutorial_github-modules/new-github-1.png" width="100%"></p>
<p><strong>Add a title</strong> to your repository and <strong>add a description.</strong> Once you’ve added these two things, scroll down and click the <strong><span style="color:green"> green </span> “Create repository” button.</strong></p>
<p align="center">
<img src="images/tutorial_github-modules/new-github-2.png" width="60%">
</p>
<p>Be sure that you <strong>do not add a README</strong>, <strong>do not add a gitignore</strong>, and <strong>do not add a license.</strong> Adding any of these three will cause a merge conflict when we link the project that you just created with the GitHub repository that you are in the process of creating.</p>
<p align="center">
<img src="images/tutorial_github-modules/new-github-3.png" width="60%">
</p>
<p>After a few seconds you should be placed on your new repository’s landing page which will look like the below image because there isn’t anything in your repository (yet).</p>
<p>Copy the link in the field and go back to your RStudio session.</p>
<p align="center">
<img src="images/tutorial_github-modules/new-github-4.png" width="100%">
</p>
</section>
<section id="adding-your-project-to-github" class="level3">
<h3 class="anchored" data-anchor-id="adding-your-project-to-github">Adding your Project to GitHub</h3>
<p>The following steps include a sequence of command line operations that will be relayed in code chunks below. <strong>Unless otherwise stated, all of the following code should be run in “Terminal”.</strong></p>
<p>If you didn’t check the “Create a git repository” button while creating the R project, you’ll need to do that via the command line now. <strong>If you did check that box, you should skip this step!</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start a git repository on the "main" branch</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>git init <span class="sc">-</span>b main</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Stage all of the files in your project to the git repository.</strong> This includes the .yml file, all .qmd files and all of their rendered versions created when you ran <code>quarto render</code> earlier. This code is equivalent to checking the box for the files in the “Git” pane of RStudio.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Stage all files</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>git add .</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once everything has been staged, <strong>you now must commit those staged files</strong> with a message.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Commit all files with the message in quotes</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>git commit <span class="sc">-</span>m <span class="st">"Initial commit"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that your project files have been committed, you need to <strong>tell your computer where you will be pushing to and pulling from.</strong> Paste the link you copied at the end of the “Make a New GitHub Repository” into the code shown in the chunk below (instead of <code>GITHUB_URL</code>) and run it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tell your computer which GitHub repository to connect to</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>git remote add origin GITHUB_URL</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Verify that URL</strong> before continuing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Confirm that URL worked</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>git remote <span class="sc">-</span>v</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, <strong>push your commited changes</strong> to the repostory that you set as the remote in the preceding two steps.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Push all of the content to the main branch</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>git push <span class="sc">-</span>u origin main</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, <strong>go back to GitHub</strong> and refresh the page to see your project content safe and sound in your new GitHub repository!</p>
<p><img src="images/tutorial_github-modules/git-github-connect-1.png" width="100%"></p>
</section>
<section id="deploy-website-via-github" class="level3">
<h3 class="anchored" data-anchor-id="deploy-website-via-github">Deploy Website via GitHub</h3>
<p>In order to get your new website actually on the web, we’ll need to tell GitHub that we want our website to be accessible at a .github.io URL.</p>
<p>To do this, <strong>go to the “Settings” tab</strong> with a gear icon and click it. You may be prompted to re-enter your GitHub password, do so and you can proceed.</p>
<p><img src="images/tutorial_github-modules/github-deploy-1.png" width="100%"></p>
<p>In the resulting page, look towards the bottom of the left sidebar of settings categories and <strong>click the “Pages” option.</strong> This is at the very bottom of the sidebar in the screen capture below but is towards the middle of all of the settings categories Github offers you.</p>
<p><img src="images/tutorial_github-modules/github-deploy-2.png" width="100%"></p>
<p>Scroll down to the middle of this page and where it says “Branch” <strong>click the dropdown menu that says “None” by default.</strong></p>
<p><img src="images/tutorial_github-modules/github-deploy-3.png" width="100%"></p>
<p><strong>Select “main”</strong> from the dropdown.</p>
<p align="center">
<img src="images/tutorial_github-modules/github-deploy-4.png" width="60%">
</p>
<p>This opens up a new dropdown menu where you can select which folder in your repository contains your website’s content (it defaults to “/ (root)”). Because we specified <code>output-dir: docs</code> in the .yml file earlier we can <strong>select “/docs” from the dropdown menu.</strong></p>
<p align="center">
<img src="images/tutorial_github-modules/github-deploy-5.png" width="60%">
</p>
<p>Once you’ve told GitHub that you want a website generated from the “docs” folder on the main branch, <strong>click the “Save” button.</strong></p>
<p align="center">
<img src="images/tutorial_github-modules/github-deploy-6.png" width="75%">
</p>
<p>From this moment your website has begun being deployed by GitHub! You can check the status of the building process by <strong>navigating to the “Actions” tab of your repository.</strong></p>
<p><strong>Select the “pages build and deployment workflow”</strong> in the list of workflows on the bottom righthand side of the page.</p>
<p><img src="images/tutorial_github-modules/github-deploy-7.png" width="100%"></p>
<p>This <strong>shows you GitHub’s building and deployment process as a flowchart.</strong> While it is working on each step there will be an <strong><span style="color:orange">amber</span></strong> circle next to the name of that sub-task. When a sub-task is completed, the <strong><span style="color:orange">amber</span></strong> circle becomes a <strong><span style="color:green">green</span></strong> circle with a check mark.</p>
<p><img src="images/tutorial_github-modules/github-deploy-8.png" width="100%"></p>
<p>When the three steps are complete the <strong><span style="color:orange">amber</span></strong> clock symbol next to the “pages build and deployment” action will turn into a larger <strong><span style="color:green">green</span></strong> circle with a check mark. This is GitHub’s way of telling you that your website is live and accessible to anyone on the internet.</p>
<p><img src="images/tutorial_github-modules/github-deploy-9.png" width="100%"></p>
<p>You can now visit your website by visiting its dedicated URL. <strong>This URL can be found by returning to the “Settings” tab and then scrolling through the sidebar to the “Pages” section.</strong></p>
<p>Alternately, the website for your repository always uses the following composition: <em>https://<strong><span style="color:blue">repository owner</span></strong>.github.io/<strong><span style="color:purple">repository name</span></strong>/</em></p>
<p><img src="images/tutorial_github-modules/github-deploy-10.png" width="100%"></p>
<p>If we visit that link, we can see that our website is live!</p>
<p><img src="images/tutorial_github-modules/github-deploy-11.png" width="100%"></p>
<section id="github-housekeeping" class="level4">
<h4 class="anchored" data-anchor-id="github-housekeeping">GitHub Housekeeping</h4>
<p>We recommend a quick housekeeping step now to make it easier to find this URL in the future. <strong>Copy the URL from the Pages setting area and return to the “Code” tab of the repository</strong>.</p>
<p>Once there, <strong>click the small gear icon to the right of the “About” header.</strong></p>
<p><img src="images/tutorial_github-modules/github-tidy-1.png" width="100%"></p>
<p>In the resulting window, <strong>paste the copied URL into the “Website” field.</strong> Once you’ve pasted it in, <strong>click the</strong> <strong><span style="color:green">green</span></strong> <strong>“Save changes” button.</strong></p>
<p align="center">
<img src="images/tutorial_github-modules/github-tidy-2.png" width="60%">
</p>
<p>This places the link to your deployed website in an intuitive, easy-to-find location both for interested third parties and yourself in the future.</p>
<p><img src="images/tutorial_github-modules/github-tidy-3.png" width="100%"></p>
</section>
</section>
<section id="adding-website-content" class="level3">
<h3 class="anchored" data-anchor-id="adding-website-content">Adding Website Content</h3>
<p>Now that you have a live website you can build whatever you’d like! Given the wide range of possibility, we’ll only cover how to add a new page but the same process applies to any edit to the living webpage.</p>
<p>To add a new page <strong>create a new Quarto document.</strong> You can do this by going to the “File” menu, entering the “New File” options, and selecting “Quarto Document…”</p>
<p align="center">
<img src="images/tutorial_quarto-website/website-tutorial_new-content-1.png" width="60%">
</p>
<p>Similarly to an R markdown file, this will open a new window that lets you enter a title and author as well as decide what format you want to render files to along with some other settings options. <strong>You only need to click the “Create” button</strong> in the bottom right of this dialogue (though you can definitely play with the other options and text boxes as you desire).</p>
<p align="center">
<img src="images/tutorial_quarto-website/website-tutorial_new-content-2.png" width="75%">
</p>
<p>After a moment, a new .qmd file will open in Quarto’s visual editor. <strong>For the purposes of this tutorial, you only need to add a <code>title</code> in the top of the file</strong> but for a real website you can add whatever content sparks joy for you!</p>
<p align="center">
<img src="images/tutorial_quarto-website/website-tutorial_new-content-3.png" width="75%">
</p>
<p><strong>Save that file into your project folder.</strong> Its name can be anything but be sure that you remember what you name it!</p>
<p align="center">
<img src="images/tutorial_quarto-website/website-tutorial_new-content-4.png" width="60%">
</p>
<p><strong>Add the name of the new Quarto document to the .yml file</strong> in the website navbar area (in this example the file is called “more-stuff.qmd”).</p>
<p align="center">
<img src="images/tutorial_quarto-website/website-tutorial_new-content-5.png" width="75%">
</p>
<p>Once you’ve added the file to the fundamental architecture of your website, you need to tell Quarto to re-build the part of the website that GitHub looks for when it deploys. To do this <strong>run <code>quarto render</code> in the Terminal.</strong></p>
<p>If you want to <em>preview</em> your changes, run <code>quarto preview</code> in the Terminal and a new browser window will be displayed showing your current website content. This preview continues until you click the <strong><span style="color:red">red</span></strong> stop sign icon in RStudio so be sure to end it when you’re done with the preview!</p>
<p><img src="images/tutorial_quarto-website/website-tutorial_new-content-6.png" width="100%"></p>
<p>Regardless, once you’ve run either <code>quarto render</code> or <code>quarto preview</code> <strong>you need to stage and commit all changed files indicated in the Git pane of RStudio</strong>. As a reminder, to stage files you check the box next to them, to commit staged files, type an informative message and press the “Commit” button in the right side of the window.</p>
<p><img src="images/tutorial_quarto-website/website-tutorial_new-content-7.png" width="100%"></p>
<p>Switch back to GitHub and you’ll see an <strong><span style="color:orange">amber</span></strong> dot next to the commit hash just beneath and to the left of the <strong><span style="color:green">green</span></strong> “Code” button.</p>
<p><img src="images/tutorial_quarto-website/website-tutorial_new-content-8.png" width="100%"></p>
<p>When the <strong><span style="color:orange">amber</span></strong> dot turns into a <strong><span style="color:green">green</span></strong> check mark that means that your edits to your website are now included in the live version of your site!</p>
<p><img src="images/tutorial_quarto-website/website-tutorial_new-content-9.png" width="100%"></p>
<p>When you visit your website you may need to refresh the page for your edits to appear but all new visitors will see the updated content when they load the page.</p>
<p><img src="images/tutorial_quarto-website/website-tutorial_new-content-10.png" width="100%"></p>
</section>
<section id="supplementary-information" class="level3">
<h3 class="anchored" data-anchor-id="supplementary-information">Supplementary Information</h3>
<p>Quarto is developing at a rapid pace so quality of life changes and new functionalities are introduced relatively frequently. Additionally, Quarto supports user-created “extensions” that can be downloaded in a given project and then used (similar to the way user-developed R packages can be shared) so if you want to do something that Quarto itself doesn’t support, chances are you’ll be able to find an extension that handles it.</p>
<p><a href="https://quarto.org/docs/websites/">Quarto’s documentation of website creation and formatting</a> is extremely thorough and is a great resource as you become more comfortable with your new website. We hope this tutorial was useful to you and welcome constructively critical feedback! Please <a href="https://github.com/NCEAS/scicomptasks/issues">post an issue</a> with any thoughts for improvement that you have.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/lter\.github\.io\/scicomp\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2024, LTER Network Office</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/lter/scicomp/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>